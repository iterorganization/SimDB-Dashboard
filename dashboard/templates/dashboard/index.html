{% extends 'base.html' %}

{% block body %}
<div id="app">
  <v-app>
    <!--    <v-navigation-drawer app clipped flat>-->
    <!--      <ul>-->
    <!--        <li>-->
    <!--          Foo-->
    <!--        </li>-->
    <!--      </ul>-->
    <!--    </v-navigation-drawer>-->

    <v-app-bar app dark shrink-on-scroll dense color="indigo darken-2">
      <v-spacer></v-spacer>
      <v-toolbar-title>SimDB Dashboard</v-toolbar-title>
      <v-spacer></v-spacer>
    </v-app-bar>

    <v-main>
      <v-container fluid>
        <v-row>
          <v-col cols="3">
            <v-row>
              <v-subheader>Search</v-subheader>
            </v-row>
            <v-divider></v-divider>
            <v-row dense>
              <v-col cols="12">
                <v-select filled :items="servers" v-model="selectedServer" label="SimDB Server" hide-details @change="setItems"></v-select>
              </v-col>
            </v-row>
            <v-row dense>
              <v-col cols="12">
                <v-alert text :value="status.show" :type="status.type"><[ status.text ]></v-alert>
              </v-col>
            </v-row>
            <v-divider></v-divider>
            <v-row dense v-for="(item, index) in searchFields" :key="item.name">
              <v-col cols="6">
                <v-subheader :for="item.name"><[ item.display ]></v-subheader>
              </v-col>
              <v-col cols="6">
                <v-text-field :id="item.name" v-model="searchModels[index]" dense filled hide-details></v-text-field>
              </v-col>
            </v-row>
            <v-row dense v-for="(item, index) in wild_search" :key="index">
              <v-col cols="6">
                <v-autocomplete
                    auto-select-first
                    clearable
                    v-model="value"
                    :items="items"
                    dense
                    filled
                ></v-autocomplete>
              </v-col>
              <v-col cols="6">
                <v-text-field :id="item.id" dense filled></v-text-field>
              </v-col>
            </v-row>
            <v-row dense>
              <v-col offset="8" cols="4">
                <v-btn @click="doSearch" block :disabled="getQuery().length == 0">
                  Search
                </v-btn>
              </v-col>
            </v-row>
          </v-col>
          <v-col cols="9">
            <v-row>
              <v-subheader>Search Results</v-subheader>
            </v-row>
            <v-divider></v-divider>
            <router-view></router-view>
          </v-col>
        </v-row>
      </v-container>
    </v-main>
  </v-app>
</div>
{% endblock %}

{% block scripts %}
<script src="{{ url_for('static', filename='dashboard/js/config.js') }}"></script>
<script src="{{ url_for('static', filename='dashboard/js/index.js') }}"></script>
{% endblock %}